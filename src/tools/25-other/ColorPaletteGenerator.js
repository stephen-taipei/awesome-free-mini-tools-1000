import{jsx as n,jsxs as l}from"react/jsx-runtime";import{useState as C}from"react";import{useTranslation as j}from"react-i18next";import M from"../../components/ui/Button";const K=a=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:0,g:0,b:0}},h=(a,t,o)=>"#"+[a,t,o].map(m=>{const b=Math.round(Math.max(0,Math.min(255,m))).toString(16);return b.length===1?"0"+b:b}).join(""),B=(a,t,o)=>{a/=255,t/=255,o/=255;const m=Math.max(a,t,o),b=Math.min(a,t,o);let v=0,y=0;const i=(m+b)/2;if(m!==b){const f=m-b;switch(y=i>.5?f/(2-m-b):f/(m+b),m){case a:v=((t-o)/f+(t<o?6:0))/6;break;case t:v=((o-a)/f+2)/6;break;case o:v=((a-t)/f+4)/6;break}}return{h:Math.round(v*360),s:Math.round(y*100),l:Math.round(i*100)}},x=(a,t,o)=>{a/=360,t/=100,o/=100;let m,b,v;if(t===0)m=b=v=o;else{const y=(N,k,g)=>(g<0&&(g+=1),g>1&&(g-=1),g<.16666666666666666?N+(k-N)*6*g:g<.5?k:g<.6666666666666666?N+(k-N)*(.6666666666666666-g)*6:N),i=o<.5?o*(1+t):o+t-o*t,f=2*o-i;m=y(f,i,a+1/3),b=y(f,i,a),v=y(f,i,a-1/3)}return{r:Math.round(m*255),g:Math.round(b*255),b:Math.round(v*255)}},p=a=>{const t=K(a),o=B(t.r,t.g,t.b);return{hex:a,rgb:t,hsl:o}};function R(){const{t:a}=j(),[t,o]=C("#3b82f6"),[m,b]=C("complementary"),[v,y]=C(null),i=p(t),N=(()=>{const{h:e,s:r,l:u}=i.hsl,d=[i];switch(m){case"complementary":{const s=x((e+180)%360,r,u);d.push(p(h(s.r,s.g,s.b)));break}case"analogous":{const s=x((e+30)%360,r,u),c=x((e-30+360)%360,r,u);d.push(p(h(s.r,s.g,s.b))),d.push(p(h(c.r,c.g,c.b)));break}case"triadic":{const s=x((e+120)%360,r,u),c=x((e+240)%360,r,u);d.push(p(h(s.r,s.g,s.b))),d.push(p(h(c.r,c.g,c.b)));break}case"split":{const s=x((e+150)%360,r,u),c=x((e+210)%360,r,u);d.push(p(h(s.r,s.g,s.b))),d.push(p(h(c.r,c.g,c.b)));break}case"tetradic":{const s=x((e+90)%360,r,u),c=x((e+180)%360,r,u),w=x((e+270)%360,r,u);d.push(p(h(s.r,s.g,s.b))),d.push(p(h(c.r,c.g,c.b))),d.push(p(h(w.r,w.g,w.b)));break}case"monochromatic":{for(let s=1;s<=4;s++){const c=Math.max(10,Math.min(90,u+(s-2)*15)),w=x(e,r,c);d.push(p(h(w.r,w.g,w.b)))}break}}return d})(),k=async(e,r)=>{await navigator.clipboard.writeText(e.hex),y(r),setTimeout(()=>y(null),1500)},g=()=>{const e="#"+Math.floor(Math.random()*16777215).toString(16).padStart(6,"0");o(e)},P=()=>{const e=N.map((d,s)=>`--color-${s+1}: ${d.hex};`).join(`
`),r=new Blob([`:root {
${e}
}`],{type:"text/css"}),u=document.createElement("a");u.download="palette.css",u.href=URL.createObjectURL(r),u.click()},T=[{value:"complementary",labelKey:"complementary"},{value:"analogous",labelKey:"analogous"},{value:"triadic",labelKey:"triadic"},{value:"split",labelKey:"split"},{value:"tetradic",labelKey:"tetradic"},{value:"monochromatic",labelKey:"monochromatic"}];return l("div",{className:"flex flex-col gap-4",children:[l("div",{className:"flex gap-2 flex-wrap items-center",children:[n(M,{onClick:g,children:a("tools.colorPalette.random")}),n("div",{className:"flex gap-1",children:T.map(e=>n("button",{onClick:()=>b(e.value),className:`px-2 py-1 text-xs rounded ${m===e.value?"bg-blue-500 text-white":"bg-slate-100 hover:bg-slate-200 text-slate-600"}`,children:a(`tools.colorPalette.types.${e.labelKey}`)},e.value))}),n("div",{className:"flex-1"}),n(M,{variant:"secondary",onClick:P,children:a("tools.colorPalette.export")})]}),l("div",{className:"flex gap-4",children:[l("div",{className:"flex-1",children:[n("div",{className:"flex gap-2 h-48 rounded-lg overflow-hidden shadow-lg",children:N.map((e,r)=>n("div",{className:"flex-1 flex flex-col items-center justify-end p-4 cursor-pointer transition-transform hover:scale-105 relative group",style:{backgroundColor:e.hex},onClick:()=>k(e,r),children:n("div",{className:`text-xs font-mono px-2 py-1 rounded ${e.hsl.l>50?"bg-black/20 text-black":"bg-white/20 text-white"}`,children:v===r?a("common.copied"):e.hex})},r))}),n("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:N.map((e,r)=>l("div",{className:"border border-slate-200 rounded-lg p-3 bg-white",children:[n("div",{className:"w-full h-12 rounded mb-2",style:{backgroundColor:e.hex}}),l("div",{className:"space-y-1 text-xs",children:[l("div",{className:"flex justify-between",children:[n("span",{className:"text-slate-500",children:"HEX"}),n("span",{className:"font-mono",children:e.hex})]}),l("div",{className:"flex justify-between",children:[n("span",{className:"text-slate-500",children:"RGB"}),l("span",{className:"font-mono",children:[e.rgb.r,", ",e.rgb.g,", ",e.rgb.b]})]}),l("div",{className:"flex justify-between",children:[n("span",{className:"text-slate-500",children:"HSL"}),l("span",{className:"font-mono",children:[e.hsl.h,", ",e.hsl.s,"%, ",e.hsl.l,"%"]})]})]})]},r))})]}),l("div",{className:"w-64 border border-slate-200 rounded-lg bg-white p-4 flex flex-col gap-4",children:[n("h3",{className:"font-semibold text-slate-700",children:a("tools.colorPalette.baseColor")}),l("div",{className:"space-y-4",children:[l("div",{className:"flex gap-2 items-center",children:[n("input",{type:"color",value:t,onChange:e=>o(e.target.value),className:"w-16 h-16 rounded cursor-pointer"}),n("div",{className:"flex-1",children:n("input",{type:"text",value:t,onChange:e=>o(e.target.value),className:"input w-full text-sm font-mono"})})]}),l("div",{className:"space-y-2 text-sm",children:[l("div",{className:"flex justify-between",children:[n("span",{className:"text-slate-500",children:"RGB"}),l("span",{className:"font-mono text-xs",children:[i.rgb.r,", ",i.rgb.g,", ",i.rgb.b]})]}),l("div",{className:"flex justify-between",children:[n("span",{className:"text-slate-500",children:"HSL"}),l("span",{className:"font-mono text-xs",children:[i.hsl.h,", ",i.hsl.s,"%, ",i.hsl.l,"%"]})]})]})]}),l("div",{className:"mt-auto pt-4 border-t border-slate-200",children:[n("h4",{className:"text-xs font-medium text-slate-500 mb-2",children:a("tools.colorPalette.info")}),n("div",{className:"text-xs text-slate-400",children:a("tools.colorPalette.hint")})]})]})]})]})}export{R as default};

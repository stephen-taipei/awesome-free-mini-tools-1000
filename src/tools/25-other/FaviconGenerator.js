import{jsx as t,jsxs as a}from"react/jsx-runtime";import{useState as i,useRef as q,useEffect as A}from"react";import{useTranslation as F}from"react-i18next";import y from"../../components/ui/Button";function L(){const{t:o}=F(),h=q(null),[d,T]=i("A"),[r,b]=i("#3b82f6"),[m,g]=i("#ffffff"),[v,S]=i(70),[f,R]=i(20),[u,N]=i("bold"),C=[16,32,48,64,128,180,192,512],x=128;A(()=>{k(x)},[d,r,m,v,f,u]);const k=(e,n)=>{const c=n||h.current;if(!c)return;const l=c.getContext("2d");if(!l)return;c.width=e,c.height=e;const $=e/100,s=f*$;if(l.clearRect(0,0,e,e),l.beginPath(),l.moveTo(s,0),l.lineTo(e-s,0),l.quadraticCurveTo(e,0,e,s),l.lineTo(e,e-s),l.quadraticCurveTo(e,e,e-s,e),l.lineTo(s,e),l.quadraticCurveTo(0,e,0,e-s),l.lineTo(0,s),l.quadraticCurveTo(0,0,s,0),l.closePath(),l.fillStyle=r,l.fill(),d){l.fillStyle=m;const w=v/100*e;l.font=`${u} ${w}px system-ui, -apple-system, sans-serif`,l.textAlign="center",l.textBaseline="middle",l.fillText(d.slice(0,2),e/2,e/2+w*.05)}},p=e=>{const n=document.createElement("canvas");k(e,n);const c=document.createElement("a");c.download=`favicon-${e}x${e}.png`,c.href=n.toDataURL("image/png"),c.click()},B=()=>{C.forEach((e,n)=>{setTimeout(()=>p(e),n*200)})},E=()=>{p(32)},P=[{name:"Blue",bg:"#3b82f6",text:"#ffffff"},{name:"Green",bg:"#22c55e",text:"#ffffff"},{name:"Red",bg:"#ef4444",text:"#ffffff"},{name:"Purple",bg:"#8b5cf6",text:"#ffffff"},{name:"Orange",bg:"#f97316",text:"#ffffff"},{name:"Pink",bg:"#ec4899",text:"#ffffff"},{name:"Dark",bg:"#1e293b",text:"#ffffff"},{name:"Light",bg:"#f1f5f9",text:"#1e293b"}];return a("div",{className:"flex flex-col gap-4",children:[a("div",{className:"flex gap-2 flex-wrap items-center",children:[t(y,{onClick:B,children:o("tools.favicon.downloadAll")}),t("div",{className:"flex-1"}),t(y,{variant:"secondary",onClick:E,children:o("tools.favicon.downloadICO")})]}),a("div",{className:"flex gap-4",children:[a("div",{className:"flex-1 flex flex-col gap-4",children:[t("div",{className:"flex items-center justify-center p-8 bg-slate-100 rounded-lg",children:a("div",{className:"flex flex-col items-center gap-4",children:[t("canvas",{ref:h,width:x,height:x,className:"shadow-xl rounded-2xl"}),a("div",{className:"text-sm text-slate-500",children:[x,"\xD7",x," ",o("tools.favicon.preview")]})]})}),t("div",{className:"grid grid-cols-4 md:grid-cols-8 gap-3",children:C.map(e=>{const n=Math.min(e,64);return a("div",{className:"flex flex-col items-center gap-2 p-2 border border-slate-200 rounded-lg hover:border-slate-300 cursor-pointer",onClick:()=>p(e),children:[t("div",{className:"rounded flex items-center justify-center font-bold text-white",style:{width:n,height:n,backgroundColor:r,fontSize:n*.5,borderRadius:f*n/100},children:d.slice(0,2)}),a("span",{className:"text-xs text-slate-500",children:[e,"px"]})]},e)})}),a("div",{className:"p-3 bg-slate-800 rounded-lg",children:[t("code",{className:"text-xs text-green-400 block",children:'<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">'}),t("code",{className:"text-xs text-green-400 block mt-1",children:'<link rel="apple-touch-icon" sizes="180x180" href="/favicon-180x180.png">'})]})]}),a("div",{className:"w-64 border border-slate-200 rounded-lg bg-white p-4 flex flex-col gap-4",children:[t("h3",{className:"font-semibold text-slate-700",children:o("tools.favicon.settings")}),a("div",{className:"space-y-4",children:[a("div",{children:[t("label",{className:"block text-xs text-slate-500 mb-1",children:o("tools.favicon.text")}),t("input",{type:"text",value:d,onChange:e=>T(e.target.value),maxLength:2,placeholder:"A",className:"input w-full text-center text-xl font-bold"}),t("div",{className:"text-xs text-slate-400 mt-1",children:o("tools.favicon.maxChars")})]}),a("div",{children:[t("label",{className:"block text-xs text-slate-500 mb-1",children:o("tools.favicon.bgColor")}),a("div",{className:"flex gap-2",children:[t("input",{type:"color",value:r,onChange:e=>b(e.target.value),className:"w-10 h-8 rounded cursor-pointer"}),t("input",{type:"text",value:r,onChange:e=>b(e.target.value),className:"input flex-1 text-xs font-mono"})]})]}),a("div",{children:[t("label",{className:"block text-xs text-slate-500 mb-1",children:o("tools.favicon.textColor")}),a("div",{className:"flex gap-2",children:[t("input",{type:"color",value:m,onChange:e=>g(e.target.value),className:"w-10 h-8 rounded cursor-pointer"}),t("input",{type:"text",value:m,onChange:e=>g(e.target.value),className:"input flex-1 text-xs font-mono"})]})]}),a("div",{children:[t("label",{className:"block text-xs text-slate-500 mb-2",children:o("tools.favicon.colorPresets")}),t("div",{className:"grid grid-cols-4 gap-1",children:P.map(e=>t("button",{onClick:()=>{b(e.bg),g(e.text)},className:"w-full aspect-square rounded",style:{backgroundColor:e.bg},title:e.name},e.name))})]}),a("div",{children:[a("label",{className:"block text-xs text-slate-500 mb-1",children:[o("tools.favicon.fontSize")," (",v,"%)"]}),t("input",{type:"range",min:"30",max:"90",value:v,onChange:e=>S(parseInt(e.target.value)),className:"w-full"})]}),a("div",{children:[a("label",{className:"block text-xs text-slate-500 mb-1",children:[o("tools.favicon.borderRadius")," (",f,"%)"]}),t("input",{type:"range",min:"0",max:"50",value:f,onChange:e=>R(parseInt(e.target.value)),className:"w-full"})]}),a("div",{children:[t("label",{className:"block text-xs text-slate-500 mb-1",children:o("tools.favicon.fontWeight")}),a("div",{className:"flex gap-1",children:[t("button",{onClick:()=>N("normal"),className:`flex-1 px-2 py-1 text-xs rounded ${u==="normal"?"bg-blue-500 text-white":"bg-slate-100 hover:bg-slate-200"}`,children:"Normal"}),t("button",{onClick:()=>N("bold"),className:`flex-1 px-2 py-1 text-xs rounded ${u==="bold"?"bg-blue-500 text-white":"bg-slate-100 hover:bg-slate-200"}`,children:"Bold"})]})]})]})]})]})]})}export{L as default};

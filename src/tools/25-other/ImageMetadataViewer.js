import{jsx as a,jsxs as s}from"react/jsx-runtime";import{useState as c,useRef as M}from"react";import{useTranslation as b}from"react-i18next";import g from"../../components/ui/Button";function N(){const{t}=b(),m=M(null),[o,x]=c(null),[e,v]=c(null),n=i=>i<1024?`${i} B`:i<1024*1024?`${(i/1024).toFixed(2)} KB`:`${(i/(1024*1024)).toFixed(2)} MB`,r=(i,l)=>l===0?i:r(l,i%l),f=(i,l)=>{const d=r(i,l);return`${i/d}:${l/d}`},u=i=>{const l=i.target.files?.[0];if(!l)return;const d=new Image;d.onload=()=>{x(d.src),v({fileName:l.name,fileSize:l.size,fileType:l.type||"unknown",width:d.width,height:d.height,aspectRatio:f(d.width,d.height),lastModified:new Date(l.lastModified).toLocaleString(),megapixels:parseFloat((d.width*d.height/1e6).toFixed(2))})},d.src=URL.createObjectURL(l)},p=async()=>{if(!e)return;const i=`File: ${e.fileName}
Size: ${n(e.fileSize)}
Type: ${e.fileType}
Dimensions: ${e.width} \xD7 ${e.height}
Aspect Ratio: ${e.aspectRatio}
Megapixels: ${e.megapixels} MP
Last Modified: ${e.lastModified}`;await navigator.clipboard.writeText(i)},h=e?[{label:t("tools.imageMetadata.fileName"),value:e.fileName},{label:t("tools.imageMetadata.fileSize"),value:n(e.fileSize)},{label:t("tools.imageMetadata.fileType"),value:e.fileType},{label:t("tools.imageMetadata.dimensions"),value:`${e.width} \xD7 ${e.height}`},{label:t("tools.imageMetadata.aspectRatio"),value:e.aspectRatio},{label:t("tools.imageMetadata.megapixels"),value:`${e.megapixels} MP`},{label:t("tools.imageMetadata.lastModified"),value:e.lastModified}]:[];return s("div",{className:"flex flex-col gap-4",children:[s("div",{className:"flex gap-2 flex-wrap items-center",children:[a(g,{onClick:()=>m.current?.click(),children:t(o?"tools.imageMetadata.changeImage":"tools.imageMetadata.selectImage")}),a("input",{ref:m,type:"file",accept:"image/*",onChange:u,className:"hidden"}),a(g,{variant:"secondary",onClick:p,disabled:!e,children:t("tools.imageMetadata.copyMetadata")})]}),s("div",{className:"flex gap-4",children:[s("div",{className:"flex-1 flex flex-col gap-4",children:[a("div",{className:"flex justify-center p-4 bg-slate-100 rounded-lg min-h-[350px] overflow-auto",children:o?a("img",{src:o,alt:"Preview",className:"max-w-full max-h-[350px] shadow-lg rounded object-contain"}):a("div",{className:"flex items-center justify-center text-slate-400 h-full",children:t("tools.imageMetadata.placeholder")})}),e&&s("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s("div",{className:"p-3 bg-blue-50 rounded-lg text-center",children:[a("div",{className:"text-2xl font-bold text-blue-600",children:e.width}),a("div",{className:"text-xs text-blue-500",children:t("tools.imageMetadata.width")})]}),s("div",{className:"p-3 bg-green-50 rounded-lg text-center",children:[a("div",{className:"text-2xl font-bold text-green-600",children:e.height}),a("div",{className:"text-xs text-green-500",children:t("tools.imageMetadata.height")})]}),s("div",{className:"p-3 bg-purple-50 rounded-lg text-center",children:[a("div",{className:"text-2xl font-bold text-purple-600",children:e.megapixels}),a("div",{className:"text-xs text-purple-500",children:"MP"})]}),s("div",{className:"p-3 bg-orange-50 rounded-lg text-center",children:[a("div",{className:"text-2xl font-bold text-orange-600",children:n(e.fileSize)}),a("div",{className:"text-xs text-orange-500",children:t("tools.imageMetadata.size")})]})]})]}),s("div",{className:"w-64 border border-slate-200 rounded-lg bg-white p-4 flex flex-col gap-4",children:[a("h3",{className:"font-semibold text-slate-700",children:t("tools.imageMetadata.metadata")}),e?a("div",{className:"space-y-2",children:h.map((i,l)=>s("div",{className:"p-2 bg-slate-50 rounded",children:[a("div",{className:"text-xs text-slate-500",children:i.label}),a("div",{className:"text-sm text-slate-700 font-medium break-all",children:i.value})]},l))}):a("div",{className:"flex items-center justify-center h-40 text-slate-400 text-sm",children:t("tools.imageMetadata.selectHint")}),e&&s("div",{className:"pt-4 border-t border-slate-200",children:[a("h4",{className:"text-xs font-medium text-slate-500 mb-2",children:t("tools.imageMetadata.colorDepth")}),s("div",{className:"space-y-1 text-xs text-slate-600",children:[s("div",{children:[t("tools.imageMetadata.totalPixels"),": ",(e.width*e.height).toLocaleString()]}),s("div",{children:[t("tools.imageMetadata.orientation"),": ",e.width>e.height?t("tools.imageMetadata.landscape"):e.width<e.height?t("tools.imageMetadata.portrait"):t("tools.imageMetadata.square")]})]})]})]})]})]})}export{N as default};

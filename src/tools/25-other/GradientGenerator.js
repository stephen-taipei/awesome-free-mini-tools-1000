import{jsx as t,jsxs as a}from"react/jsx-runtime";import{useState as u}from"react";import{useTranslation as P}from"react-i18next";import N from"../../components/ui/Button";function D(){const{t:s}=P(),[b,w]=u("linear"),[d,S]=u(90),[n,c]=u([{id:"1",color:"#3b82f6",position:0},{id:"2",color:"#8b5cf6",position:100}]),[i,p]=u(null),[k,y]=u(!1),x=(()=>{const e=[...n].sort((l,h)=>l.position-h.position).map(l=>`${l.color} ${l.position}%`).join(", ");switch(b){case"linear":return`linear-gradient(${d}deg, ${e})`;case"radial":return`radial-gradient(circle, ${e})`;case"conic":return`conic-gradient(from ${d}deg, ${e})`;default:return`linear-gradient(${d}deg, ${e})`}})(),$=()=>{const o=Date.now().toString(),e=n.map(r=>r.position).sort((r,f)=>r-f);let l=50;if(e.length>=2){let r=0,f=0;for(let g=0;g<e.length-1;g++){const C=e[g+1]-e[g];C>r&&(r=C,f=e[g])}l=f+r/2}const h="#"+Math.floor(Math.random()*16777215).toString(16).padStart(6,"0");c([...n,{id:o,color:h,position:l}]),p(o)},v=(o,e)=>{c(n.map(l=>l.id===o?{...l,...e}:l))},G=o=>{n.length<=2||(c(n.filter(e=>e.id!==o)),i===o&&p(null))},M=async()=>{await navigator.clipboard.writeText(`background: ${x};`),y(!0),setTimeout(()=>y(!1),1500)},T=()=>{const o=[],e=2+Math.floor(Math.random()*2);for(let l=0;l<e;l++)o.push({id:Date.now().toString()+l,color:"#"+Math.floor(Math.random()*16777215).toString(16).padStart(6,"0"),position:l===0?0:l===e-1?100:Math.round(l/(e-1)*100)});c(o),S(Math.floor(Math.random()*360))},I=[{name:"Sunset",stops:[{color:"#f97316",position:0},{color:"#ec4899",position:100}]},{name:"Ocean",stops:[{color:"#06b6d4",position:0},{color:"#3b82f6",position:100}]},{name:"Forest",stops:[{color:"#22c55e",position:0},{color:"#15803d",position:100}]},{name:"Purple",stops:[{color:"#8b5cf6",position:0},{color:"#ec4899",position:100}]},{name:"Fire",stops:[{color:"#fbbf24",position:0},{color:"#ef4444",position:100}]},{name:"Night",stops:[{color:"#1e293b",position:0},{color:"#6366f1",position:100}]}],B=o=>{c(o.map((e,l)=>({...e,id:Date.now().toString()+l})))},m=i?n.find(o=>o.id===i):null;return a("div",{className:"flex flex-col gap-4",children:[a("div",{className:"flex gap-2 flex-wrap items-center",children:[t(N,{onClick:T,children:s("tools.gradient.random")}),t("div",{className:"flex gap-1",children:["linear","radial","conic"].map(o=>t("button",{onClick:()=>w(o),className:`px-2 py-1 text-xs rounded ${b===o?"bg-blue-500 text-white":"bg-slate-100 hover:bg-slate-200 text-slate-600"}`,children:s(`tools.gradient.types.${o}`)},o))}),t("div",{className:"flex-1"}),t(N,{variant:"secondary",onClick:M,children:s(k?"common.copied":"tools.gradient.copyCSS")})]}),t("div",{className:"flex gap-2 flex-wrap",children:I.map(o=>a("button",{onClick:()=>B(o.stops),className:"px-3 py-1.5 text-xs rounded-full border border-slate-200 hover:border-slate-300 flex items-center gap-2",children:[t("div",{className:"w-4 h-4 rounded-full",style:{background:`linear-gradient(90deg, ${o.stops.map(e=>e.color).join(", ")})`}}),o.name]},o.name))}),a("div",{className:"flex gap-4",children:[a("div",{className:"flex-1 flex flex-col gap-4",children:[t("div",{className:"h-64 rounded-lg shadow-lg",style:{background:x},onClick:()=>p(null)}),a("div",{className:"relative h-8 rounded bg-slate-200",children:[t("div",{className:"absolute inset-0 rounded",style:{background:x}}),n.map(o=>t("button",{className:`absolute top-1/2 -translate-y-1/2 w-4 h-6 rounded border-2 ${i===o.id?"border-blue-500 ring-2 ring-blue-200":"border-white"} shadow cursor-pointer`,style:{left:`calc(${o.position}% - 8px)`,backgroundColor:o.color},onClick:()=>p(o.id)},o.id))]}),t("div",{className:"p-3 bg-slate-800 rounded-lg",children:a("code",{className:"text-sm text-green-400 break-all",children:["background: ",x,";"]})})]}),a("div",{className:"w-64 border border-slate-200 rounded-lg bg-white p-4 flex flex-col gap-4",children:[t("h3",{className:"font-semibold text-slate-700",children:s("tools.gradient.settings")}),a("div",{className:"space-y-4",children:[(b==="linear"||b==="conic")&&a("div",{children:[a("label",{className:"block text-xs text-slate-500 mb-1",children:[s("tools.gradient.angle")," (",d,"\xB0)"]}),t("input",{type:"range",min:"0",max:"360",value:d,onChange:o=>S(parseInt(o.target.value)),className:"w-full"})]}),a("div",{children:[a("div",{className:"flex justify-between items-center mb-2",children:[t("label",{className:"text-xs text-slate-500",children:s("tools.gradient.colorStops")}),a("button",{onClick:$,className:"text-xs text-blue-500 hover:text-blue-600",children:["+ ",s("tools.gradient.addStop")]})]}),t("div",{className:"space-y-1 max-h-32 overflow-auto",children:[...n].sort((o,e)=>o.position-e.position).map(o=>a("div",{className:`flex items-center gap-2 p-1 rounded cursor-pointer ${i===o.id?"bg-blue-50":"hover:bg-slate-50"}`,onClick:()=>p(o.id),children:[t("div",{className:"w-4 h-4 rounded",style:{backgroundColor:o.color}}),t("span",{className:"text-xs font-mono flex-1",children:o.color}),a("span",{className:"text-xs text-slate-400",children:[o.position,"%"]})]},o.id))})]})]}),m&&a("div",{className:"pt-4 border-t border-slate-200 space-y-4",children:[t("h4",{className:"text-xs font-medium text-slate-500",children:s("tools.gradient.editStop")}),a("div",{children:[t("label",{className:"block text-xs text-slate-500 mb-1",children:s("tools.gradient.color")}),a("div",{className:"flex gap-2 items-center",children:[t("input",{type:"color",value:m.color,onChange:o=>v(i,{color:o.target.value}),className:"w-10 h-8 rounded cursor-pointer"}),t("input",{type:"text",value:m.color,onChange:o=>v(i,{color:o.target.value}),className:"input flex-1 text-xs font-mono"})]})]}),a("div",{children:[a("label",{className:"block text-xs text-slate-500 mb-1",children:[s("tools.gradient.position")," (",m.position,"%)"]}),t("input",{type:"range",min:"0",max:"100",value:m.position,onChange:o=>v(i,{position:parseInt(o.target.value)}),className:"w-full"})]}),n.length>2&&t(N,{variant:"secondary",className:"w-full text-red-500 hover:text-red-600 hover:bg-red-50",onClick:()=>G(i),children:s("tools.gradient.deleteStop")})]})]})]})]})}export{D as default};

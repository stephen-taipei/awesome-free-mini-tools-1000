import{jsx as a,jsxs as t}from"react/jsx-runtime";import{useState as d,useRef as R,useEffect as O}from"react";import{useTranslation as D}from"react-i18next";import v from"../../components/ui/Button";const h={" ":"11011001100","!":"11001101100",'"':"11001100110","#":"10010011000",$:"10010001100","%":"10001001100","&":"10011001000","'":"10011000100","(":"10001100100",")":"11001001000","*":"11001000100","+":"11000100100",",":"10110011100","-":"10011011100",".":"10011001110","/":"10111001100",0:"10011101100",1:"10011100110",2:"11001110010",3:"11001011100",4:"11001001110",5:"11011100100",6:"11001110100",7:"11101101110",8:"11101001100",9:"11100101100",":":"11100100110",";":"11101100100","<":"11100110100","=":"11100110010",">":"11011011000","?":"11011000110","@":"11000110110",A:"10100011000",B:"10001011000",C:"10001000110",D:"10110001000",E:"10001101000",F:"10001100010",G:"11010001000",H:"11000101000",I:"11000100010",J:"10110111000",K:"10110001110",L:"10001101110",M:"10111011000",N:"10111000110",O:"10001110110",P:"11101110110",Q:"11010001110",R:"11000101110",S:"11011101000",T:"11011100010",U:"11011101110",V:"11101011000",W:"11101000110",X:"11100010110",Y:"11101101000",Z:"11101100010","[":"11100011010","\\":"11101111010","]":"11001000010","^":"11110001010",_:"10100110000","`":"10100001100",a:"10010110000",b:"10010000110",c:"10000101100",d:"10000100110",e:"10110010000",f:"10110000100",g:"10011010000",h:"10011000010",i:"10000110100",j:"10000110010",k:"11000010010",l:"11001010000",m:"11110111010",n:"11000010100",o:"10001111010",p:"10100111100",q:"10010111100",r:"10010011110",s:"10111100100",t:"10011110100",u:"10011110010",v:"11110100100",w:"11110010100",x:"11110010010",y:"11011011110",z:"11011110110","{":"11110110110","|":"10101111000","}":"10100011110","~":"10001011110"},H="11010010000",I="1100011101011";function L(){const{t:l}=D(),r=R(null),[i,N]=d("HELLO-123"),[c,C]=d(300),[s,w]=d(100),[f,y]=d(!0),[m,u]=d("#000000"),[x,g]=d("#ffffff"),T=e=>{let o=H;for(const n of e)h[n]&&(o+=h[n]);return o+=I,o};O(()=>{if(!r.current||!i.trim())return;const e=r.current,o=e.getContext("2d");if(!o)return;e.width=c,e.height=s,o.fillStyle=x,o.fillRect(0,0,c,s);const n=T(i),b=(c-40)/n.length,E=f?s-30:s-20,S=20;o.fillStyle=m;for(let p=0;p<n.length;p++)n[p]==="1"&&o.fillRect(S+p*b,10,b,E);f&&(o.fillStyle=m,o.font="14px monospace",o.textAlign="center",o.fillText(i,c/2,s-8))},[i,c,s,f,m,x]);const k=()=>{if(!r.current)return;const e=document.createElement("a");e.download="barcode.png",e.href=r.current.toDataURL("image/png"),e.click()},B=async()=>{if(r.current)try{const e=await new Promise(o=>{r.current.toBlob(n=>o(n),"image/png")});await navigator.clipboard.write([new ClipboardItem({"image/png":e})])}catch(e){console.error("Failed to copy:",e)}};return t("div",{className:"flex flex-col gap-4",children:[t("div",{className:"flex gap-2 flex-wrap items-center",children:[t("label",{className:"flex items-center gap-1 text-sm",children:[a("input",{type:"checkbox",checked:f,onChange:e=>y(e.target.checked),className:"rounded"}),l("tools.barcode.showText")]}),a("div",{className:"flex-1"}),a(v,{variant:"secondary",onClick:B,children:l("common.copy")}),a(v,{variant:"secondary",onClick:k,children:l("common.download")})]}),t("div",{className:"flex gap-4",children:[t("div",{className:"flex-1 flex flex-col gap-4",children:[t("div",{children:[a("label",{className:"block text-sm text-slate-600 mb-1",children:l("tools.barcode.content")}),a("input",{type:"text",value:i,onChange:e=>N(e.target.value),placeholder:l("tools.barcode.placeholder"),className:"input w-full font-mono"})]}),a("div",{className:"flex justify-center p-8 border border-slate-200 rounded-lg bg-slate-50",children:a("canvas",{ref:r,style:{maxWidth:"100%"},className:"shadow-lg"})})]}),t("div",{className:"w-64 border border-slate-200 rounded-lg bg-white p-4 flex flex-col gap-4",children:[a("h3",{className:"font-semibold text-slate-700",children:l("tools.barcode.settings")}),t("div",{className:"space-y-4",children:[t("div",{children:[t("label",{className:"block text-xs text-slate-500 mb-1",children:[l("tools.barcode.width")," (",c,"px)"]}),a("input",{type:"range",min:"200",max:"500",step:"10",value:c,onChange:e=>C(parseInt(e.target.value)),className:"w-full"})]}),t("div",{children:[t("label",{className:"block text-xs text-slate-500 mb-1",children:[l("tools.barcode.height")," (",s,"px)"]}),a("input",{type:"range",min:"60",max:"200",step:"10",value:s,onChange:e=>w(parseInt(e.target.value)),className:"w-full"})]}),t("div",{children:[a("label",{className:"block text-xs text-slate-500 mb-1",children:l("tools.barcode.barColor")}),t("div",{className:"flex gap-2 items-center",children:[a("input",{type:"color",value:m,onChange:e=>u(e.target.value),className:"w-10 h-8 rounded cursor-pointer"}),a("input",{type:"text",value:m,onChange:e=>u(e.target.value),className:"input flex-1 text-xs font-mono"})]})]}),t("div",{children:[a("label",{className:"block text-xs text-slate-500 mb-1",children:l("tools.barcode.bgColor")}),t("div",{className:"flex gap-2 items-center",children:[a("input",{type:"color",value:x,onChange:e=>g(e.target.value),className:"w-10 h-8 rounded cursor-pointer"}),a("input",{type:"text",value:x,onChange:e=>g(e.target.value),className:"input flex-1 text-xs font-mono"})]})]})]}),t("div",{className:"mt-auto pt-4 border-t border-slate-200",children:[a("h4",{className:"text-xs font-medium text-slate-500 mb-2",children:l("tools.barcode.info")}),t("div",{className:"space-y-1 text-xs text-slate-500",children:[t("div",{children:[l("tools.barcode.format"),": Code 128"]}),t("div",{children:[l("tools.barcode.chars"),": ",i.length]})]})]})]})]})]})}export{L as default};

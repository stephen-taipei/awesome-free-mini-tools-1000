import{jsx as t,jsxs as e}from"react/jsx-runtime";import{useState as o,useEffect as H}from"react";import{useTranslation as W}from"react-i18next";import I from"../../components/ui/Button";function $(a,i){for(a=Math.abs(Math.round(a)),i=Math.abs(Math.round(i));i;){const d=i;i=a%i,a=d}return a}function T(){const{t:a}=W(),[i,d]=o(1920),[l,x]=o(1080),[m,u]=o(1280),[h,r]=o(720),[c,g]=o(!0),[f,b]=o(!1),N=$(i,l),v=i/N,p=l/N,n=i/l;H(()=>{c&&i>0&&l>0&&r(Math.round(m/n))},[m,c,n,i,l]);const w=s=>{u(s),c&&r(Math.round(s/n))},R=s=>{r(s),c&&u(Math.round(s*n))},y=()=>{d(l),x(i),u(h),r(m)},k=async()=>{await navigator.clipboard.writeText(`${v}:${p}`),b(!0),setTimeout(()=>b(!1),1500)},M=[{name:"16:9",w:1920,h:1080},{name:"4:3",w:1024,h:768},{name:"1:1",w:1080,h:1080},{name:"21:9",w:2560,h:1080},{name:"9:16",w:1080,h:1920},{name:"3:2",w:1440,h:960},{name:"2:3",w:800,h:1200},{name:"4:5",w:1080,h:1350}],C=s=>{d(s.w),x(s.h)};return e("div",{className:"flex flex-col gap-4",children:[e("div",{className:"flex gap-2 flex-wrap items-center",children:[t("div",{className:"flex gap-1 flex-wrap",children:M.map(s=>t("button",{onClick:()=>C(s),className:"px-2 py-1 text-xs rounded bg-slate-100 hover:bg-slate-200 text-slate-600",children:s.name},s.name))}),t("div",{className:"flex-1"}),t(I,{variant:"secondary",onClick:k,children:a(f?"common.copied":"tools.aspectRatio.copyRatio")})]}),e("div",{className:"flex gap-4",children:[e("div",{className:"flex-1 flex flex-col gap-4",children:[t("div",{className:"flex items-center justify-center p-8 bg-slate-50 rounded-lg min-h-[300px]",children:t("div",{className:"bg-blue-500 rounded-lg shadow-lg flex items-center justify-center text-white",style:{width:Math.min(400,i/Math.max(i,l)*400),height:Math.min(300,l/Math.max(i,l)*300),aspectRatio:`${i} / ${l}`},children:e("div",{className:"text-center",children:[e("div",{className:"text-3xl font-bold",children:[v,":",p]}),e("div",{className:"text-sm opacity-80 mt-1",children:[i," \xD7 ",l]})]})})}),e("div",{className:"grid grid-cols-2 gap-4",children:[e("div",{className:"border border-slate-200 rounded-lg p-4 bg-white",children:[t("h4",{className:"text-sm font-medium text-slate-700 mb-3",children:a("tools.aspectRatio.original")}),e("div",{className:"flex gap-2 items-center",children:[e("div",{className:"flex-1",children:[t("label",{className:"block text-xs text-slate-500 mb-1",children:a("tools.aspectRatio.width")}),t("input",{type:"number",min:"1",value:i,onChange:s=>d(parseInt(s.target.value)||1),className:"input w-full"})]}),t("button",{onClick:y,className:"mt-5 p-2 rounded hover:bg-slate-100",title:a("tools.aspectRatio.swap"),children:"\u21C4"}),e("div",{className:"flex-1",children:[t("label",{className:"block text-xs text-slate-500 mb-1",children:a("tools.aspectRatio.height")}),t("input",{type:"number",min:"1",value:l,onChange:s=>x(parseInt(s.target.value)||1),className:"input w-full"})]})]})]}),e("div",{className:"border border-slate-200 rounded-lg p-4 bg-white",children:[e("div",{className:"flex items-center justify-between mb-3",children:[t("h4",{className:"text-sm font-medium text-slate-700",children:a("tools.aspectRatio.resize")}),e("label",{className:"flex items-center gap-1 text-xs",children:[t("input",{type:"checkbox",checked:c,onChange:s=>g(s.target.checked),className:"rounded"}),a("tools.aspectRatio.lock")]})]}),e("div",{className:"flex gap-2 items-center",children:[e("div",{className:"flex-1",children:[t("label",{className:"block text-xs text-slate-500 mb-1",children:a("tools.aspectRatio.width")}),t("input",{type:"number",min:"1",value:m,onChange:s=>w(parseInt(s.target.value)||1),className:"input w-full"})]}),t("span",{className:"mt-5 text-slate-400",children:"\xD7"}),e("div",{className:"flex-1",children:[t("label",{className:"block text-xs text-slate-500 mb-1",children:a("tools.aspectRatio.height")}),t("input",{type:"number",min:"1",value:h,onChange:s=>R(parseInt(s.target.value)||1),className:"input w-full"})]})]})]})]})]}),e("div",{className:"w-64 border border-slate-200 rounded-lg bg-white p-4 flex flex-col gap-4",children:[t("h3",{className:"font-semibold text-slate-700",children:a("tools.aspectRatio.info")}),e("div",{className:"space-y-3",children:[e("div",{className:"p-3 bg-slate-50 rounded-lg",children:[t("div",{className:"text-xs text-slate-500 mb-1",children:a("tools.aspectRatio.ratio")}),e("div",{className:"text-2xl font-bold text-slate-700",children:[v,":",p]})]}),e("div",{className:"grid grid-cols-2 gap-2",children:[e("div",{className:"p-2 bg-slate-50 rounded",children:[t("div",{className:"text-xs text-slate-500",children:a("tools.aspectRatio.decimal")}),t("div",{className:"text-sm font-mono",children:n.toFixed(4)})]}),e("div",{className:"p-2 bg-slate-50 rounded",children:[t("div",{className:"text-xs text-slate-500",children:a("tools.aspectRatio.pixels")}),t("div",{className:"text-sm font-mono",children:(i*l).toLocaleString()})]})]}),e("div",{className:"p-2 bg-slate-50 rounded",children:[t("div",{className:"text-xs text-slate-500 mb-1",children:a("tools.aspectRatio.css")}),e("code",{className:"text-xs font-mono text-slate-700",children:["aspect-ratio: ",v,"/",p,";"]})]})]}),e("div",{className:"mt-auto pt-4 border-t border-slate-200",children:[t("h4",{className:"text-xs font-medium text-slate-500 mb-2",children:a("tools.aspectRatio.common")}),e("div",{className:"space-y-1 text-xs text-slate-500",children:[e("div",{children:["16:9 - ",a("tools.aspectRatio.widescreen")]}),e("div",{children:["4:3 - ",a("tools.aspectRatio.standard")]}),e("div",{children:["1:1 - ",a("tools.aspectRatio.square")]}),e("div",{children:["9:16 - ",a("tools.aspectRatio.portrait")]})]})]})]})]})]})}export{T as default};

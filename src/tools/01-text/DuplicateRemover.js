import{jsx as e,jsxs as t}from"react/jsx-runtime";import{useState as m,useMemo as w}from"react";import{useTranslation as M}from"react-i18next";import{removeDuplicates as L}from"../../utils/duplicateRemover";import{useClipboard as j}from"../../hooks/useClipboard";import u from"../../components/ui/Button";import f from"../../components/ui/TextArea";function B(){const{t:s}=M(),[n,v]=m(""),[o,x]=m("lines"),[d,b]=m("first"),[c,g]=m(!0),[p,N]=m(!0),{copied:h,copy:y}=j(),a=w(()=>n.trim()?L(n,{mode:o,keepMode:d,caseSensitive:c,trimWhitespace:p}):null,[n,o,d,c,p]),C=()=>{a&&y(a.result)},R=()=>{v("")},k=()=>{if(!a)return;const l=new Blob([a.result],{type:"text/plain;charset=utf-8"}),r=URL.createObjectURL(l),i=document.createElement("a");i.href=r,i.download=`deduplicated-${o}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)};return t("div",{className:"space-y-6",children:[t("div",{className:"card p-4",children:[t("div",{className:"grid md:grid-cols-2 gap-6",children:[t("div",{children:[e("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:s("tools.duplicateRemover.modeLabel")}),t("div",{className:"flex gap-2",children:[e("button",{onClick:()=>x("lines"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-medium transition-all ${o==="lines"?"bg-primary-500 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:s("tools.duplicateRemover.modes.lines")}),e("button",{onClick:()=>x("words"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-medium transition-all ${o==="words"?"bg-primary-500 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:s("tools.duplicateRemover.modes.words")})]})]}),t("div",{children:[e("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:s("tools.duplicateRemover.keepLabel")}),t("div",{className:"flex gap-2",children:[e("button",{onClick:()=>b("first"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-medium transition-all ${d==="first"?"bg-primary-500 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:s("tools.duplicateRemover.keep.first")}),e("button",{onClick:()=>b("last"),className:`flex-1 px-4 py-2 rounded-lg text-sm font-medium transition-all ${d==="last"?"bg-primary-500 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:s("tools.duplicateRemover.keep.last")})]})]})]}),t("div",{className:"flex flex-wrap gap-6 mt-4 pt-4 border-t border-slate-200",children:[t("label",{className:"flex items-center gap-2 cursor-pointer",children:[e("input",{type:"checkbox",checked:c,onChange:l=>g(l.target.checked),className:"w-4 h-4 rounded border-slate-300 text-primary-500 focus:ring-primary-500"}),e("span",{className:"text-sm text-slate-700",children:s("tools.duplicateRemover.caseSensitive")})]}),t("label",{className:"flex items-center gap-2 cursor-pointer",children:[e("input",{type:"checkbox",checked:p,onChange:l=>N(l.target.checked),className:"w-4 h-4 rounded border-slate-300 text-primary-500 focus:ring-primary-500"}),e("span",{className:"text-sm text-slate-700",children:s("tools.duplicateRemover.trimWhitespace")})]})]})]}),t("div",{className:"grid md:grid-cols-2 gap-6",children:[t("div",{className:"card p-4",children:[t("div",{className:"flex items-center justify-between mb-3",children:[e("label",{className:"text-sm font-medium text-slate-700",children:s("common.input")}),a&&e("span",{className:"text-xs text-slate-500",children:o==="lines"?s("tools.duplicateRemover.linesCount",{count:a.originalCount}):s("tools.duplicateRemover.wordsCount",{count:a.originalCount})})]}),e(f,{value:n,onChange:l=>v(l.target.value),placeholder:s("tools.duplicateRemover.inputPlaceholder"),rows:12}),e("div",{className:"mt-3 flex justify-end",children:e(u,{variant:"secondary",onClick:R,disabled:!n,children:s("common.clear")})})]}),t("div",{className:"card p-4",children:[t("div",{className:"flex items-center justify-between mb-3",children:[e("label",{className:"text-sm font-medium text-slate-700",children:s("common.output")}),a&&e("span",{className:"text-xs text-slate-500",children:o==="lines"?s("tools.duplicateRemover.linesCount",{count:a.uniqueCount}):s("tools.duplicateRemover.wordsCount",{count:a.uniqueCount})})]}),e(f,{value:a?.result||"",readOnly:!0,placeholder:s("common.noContent"),rows:12,className:"bg-slate-50"}),t("div",{className:"mt-3 flex justify-end gap-2",children:[e(u,{variant:"secondary",onClick:k,disabled:!a,children:s("common.download")}),e(u,{onClick:C,disabled:!a,children:s(h?"common.copied":"common.copy")})]})]})]}),a&&a.removedCount>0&&t("div",{className:"card p-4",children:[t("div",{className:"flex items-center gap-4 mb-3",children:[t("div",{className:"flex items-center gap-2",children:[e("span",{className:"w-3 h-3 rounded-full bg-red-500"}),t("span",{className:"text-sm text-slate-600",children:[s("tools.duplicateRemover.removed"),":",e("span",{className:"font-medium text-red-600 ml-1",children:a.removedCount})]})]}),t("div",{className:"flex items-center gap-2",children:[e("span",{className:"w-3 h-3 rounded-full bg-green-500"}),t("span",{className:"text-sm text-slate-600",children:[s("tools.duplicateRemover.unique"),":",e("span",{className:"font-medium text-green-600 ml-1",children:a.uniqueCount})]})]})]}),a.duplicates.length>0&&t("div",{children:[t("div",{className:"text-sm font-medium text-slate-700 mb-2",children:[s("tools.duplicateRemover.duplicatesFound"),":"]}),e("div",{className:"max-h-32 overflow-auto bg-slate-50 rounded-lg p-3",children:t("div",{className:"flex flex-wrap gap-2",children:[a.duplicates.slice(0,20).map((l,r)=>e("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded text-xs font-mono",children:l.length>30?l.slice(0,30)+"...":l},r)),a.duplicates.length>20&&t("span",{className:"px-2 py-1 text-slate-500 text-xs",children:["+",a.duplicates.length-20," ",s("tools.duplicateRemover.more")]})]})})]})]}),t("div",{className:"text-center text-xs text-slate-500 bg-slate-100 rounded-lg py-3 px-4",children:[e("svg",{className:"inline-block w-4 h-4 mr-1 -mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),s("common.footer.privacy")]})]})}export{B as default};
